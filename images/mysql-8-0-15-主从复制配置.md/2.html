<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="baidu-site-verification" content="codeva-18Edjlpyk5">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"weidanli.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.10.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":false,"nav":{"disqus":{"text":"Load Disqus","order":-1}},"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

  <meta name="description" content="Mysql主从同步（复制） - kylinlin - 博客园                                                                                    var currentBlogId &#x3D; 230856;         var">
<meta property="og:type" content="website">
<meta property="og:title" content="DanZ&#39;s Blog">
<meta property="og:url" content="http://weidanli.github.io/images/mysql-8-0-15-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E9%85%8D%E7%BD%AE.md/2.html">
<meta property="og:site_name" content="DanZ&#39;s Blog">
<meta property="og:description" content="Mysql主从同步（复制） - kylinlin - 博客园                                                                                    var currentBlogId &#x3D; 230856;         var">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://common.cnblogs.com/logo.svg">
<meta property="og:image" content="http://common.cnblogs.com/images/blog/search.svg">
<meta property="og:image" content="http://common.cnblogs.com/images/blog/newpost.svg">
<meta property="og:image" content="http://common.cnblogs.com/images/blog/myblog.svg">
<meta property="og:image" content="http://common.cnblogs.com/images/blog/message.svg">
<meta property="og:image" content="http://common.cnblogs.com/images/blog/lite-mode-on.svg">
<meta property="og:image" content="http://common.cnblogs.com/images/blog/avatar-default.svg">
<meta property="og:image" content="http://weidanli.github.io/images/lite-mode-check.svg">
<meta property="og:image" content="http://weidanli.github.io/skins/custom/images/logo.gif">
<meta property="og:image" content="https://images2015.cnblogs.com/blog/771870/201603/771870-20160309163145022-1215021782.png">
<meta property="og:image" content="https://images2015.cnblogs.com/blog/771870/201603/771870-20160309163146257-1219019147.png">
<meta property="og:image" content="https://images2015.cnblogs.com/blog/771870/201603/771870-20160309163148225-1200721404.png">
<meta property="og:image" content="https://images2015.cnblogs.com/blog/771870/201603/771870-20160309163149272-1048386936.png">
<meta property="article:published_time" content="2023-02-01T16:18:28.722Z">
<meta property="article:modified_time" content="2023-01-31T15:59:27.008Z">
<meta property="article:author" content="Weidan">
<meta property="article:tag" content="java">
<meta property="article:tag" content="vue">
<meta property="article:tag" content="开发">
<meta property="article:tag" content="项目">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://common.cnblogs.com/logo.svg">


<link rel="canonical" href="http://weidanli.github.io/images/mysql-8-0-15-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E9%85%8D%E7%BD%AE.md/2">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":false,"lang":"zh-CN","comments":true,"permalink":"http://weidanli.github.io/images/mysql-8-0-15-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E9%85%8D%E7%BD%AE.md/2.html","path":"images/mysql-8-0-15-主从复制配置.md/2.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title> | DanZ's Blog
</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">DanZ's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">a normal developer daily blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section">首页</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section">分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section">归档</a></li>
        <li class="menu-item menu-item-数据结构"><a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="section">数据结构</a></li>
        <li class="menu-item menu-item-spring源码"><a href="/spring-sources/" rel="section">Spring源码</a></li>
        <li class="menu-item menu-item-mysql底层"><a href="/mysql/" rel="section">MySQL底层</a></li>
        <li class="menu-item menu-item-tomcat源码"><a href="/tomcat-sources/" rel="section">Tomcat源码</a></li>
        <li class="menu-item menu-item-计算机网络"><a href="/network/" rel="section">计算机网络</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#blogTitle"><span class="nav-number">1.</span> <span class="nav-text">杂牌军里的臭皮匠
</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#blogTitle"><span class="nav-number">1.1.</span> <span class="nav-text"></span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#topics"><span class="nav-number">2.</span> <span class="nav-text">
                

    Mysql主从同步（复制）
    


            </span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.0.1.</span> <span class="nav-text"></span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.1.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.2.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.3.</span> <span class="nav-text">mysql主从同步定义</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.3.1.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.3.2.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.3.3.</span> <span class="nav-text">主从同步机制</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.4.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.5.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.6.</span> <span class="nav-text">配置主从同步</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.6.1.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.6.2.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.6.3.</span> <span class="nav-text">配置主服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.6.4.</span> <span class="nav-text">配置从服务器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.7.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.8.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.9.</span> <span class="nav-text">使用主从同步来备份</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.9.1.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.9.2.</span> <span class="nav-text">使用mysqldump来备份</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.9.3.</span> <span class="nav-text">备份原始文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.10.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.11.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.12.</span> <span class="nav-text">主从同步的小技巧</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.13.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.14.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.15.</span> <span class="nav-text">排错</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.15.1.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.15.2.</span> <span class="nav-text">Slave_IO_Running: NO</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.15.3.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.15.4.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cnblogs_post_body"><span class="nav-number">2.0.15.5.</span> <span class="nav-text">Slave_SQL_Running: No</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Weidan</p>
  <div class="site-description" itemprop="description">计算机基础 计算机网络 Java Vue 前端 后端</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">70</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">46</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/WeidanLi" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;WeidanLi" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:toweidan@126.com" title="E-Mail → mailto:toweidan@126.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/WeidanLi" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner page posts-expand">
  
  


    
    
    
    <div class="post-block" lang="zh-CN"><header class="post-header">

<h1 class="post-title" itemprop="name headline">
</h1>

<div class="post-meta-container">
  <ul class="breadcrumb">
            <li><a href="/images/">IMAGES</a></li>
            <li><a href="/images/mysql-8-0-15-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E9%85%8D%E7%BD%AE.md/">MYSQL-8-0-15-主从复制配置.MD</a></li>
            <li>2</li>
          
  </ul>
</div>

</header>

      
      
      <div class="post-body">
          <!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="referrer" content="origin-when-cross-origin" />
    <meta name="description" content="目录： mysql主从同步定义 主从同步机制 配置主从同步 配置主服务器 配置从服务器 使用主从同步来备份 使用mysqldump来备份 备份原始文件 主从同步的小技巧 排错 Slave_IO_Run" />
    <meta property="og:description" content="目录： mysql主从同步定义 主从同步机制 配置主从同步 配置主服务器 配置从服务器 使用主从同步来备份 使用mysqldump来备份 备份原始文件 主从同步的小技巧 排错 Slave_IO_Run" />
    <meta http-equiv="Cache-Control" content="no-transform"/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Mysql主从同步（复制） - kylinlin - 博客园</title>
    <link id="favicon" rel="shortcut icon" href="//common.cnblogs.com/favicon.svg" type="image/svg+xml" />
    
    <link rel="stylesheet" href="/css/blog-common.min.css?v=Hz1XkO4OWN-swEFAWJXfbaC4Pmtvk7KRV-rZmebTAVM" />
    

    <link id="MainCss" rel="stylesheet" href="/skins/codinglife/bundle-codinglife.min.css?v=IeD0Pp-xOzBammDm8nymAMW81wod9Zt-ASVpOXOC3M4" />
        <link id="highlighter-theme-cnblogs" type="text/css" rel="stylesheet" href="/css/hljs/cnblogs.css?v=5J1NDtbnnIr2Rc2SdhEMlMxD4l9Eydj88B31E7_NhS4" />
    <link type="text/css" rel="stylesheet" href="https://www.cnblogs.com/kylinlin/custom.css?v=PqxCmrLdcm19xB1pLqYIKzAlI7I=" />
    
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/codinglife/bundle-codinglife-mobile.min.css?v=zg_cAXkCwJkofm2yC3lOVikwQf1VNyElsNa5vJrVN0I" />
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/kylinlin/rss" />
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/kylinlin/rsd.xml" />
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/kylinlin/wlwmanifest.xml" />
    <script>
        var currentBlogId = 230856;
        var currentBlogApp = 'kylinlin';
        var isLogined = false;
        var isBlogOwner = false;
        var skinName = 'CodingLife';
        var visitorUserId = '';
        var hasCustomScript = false;
        try {
            if (hasCustomScript && document.referrer && document.referrer.indexOf('baidu.com') >= 0) {
                Object.defineProperty(document, 'referrer', { value: '' });
                Object.defineProperty(Document.prototype, 'referrer', { get: function(){ return ''; } });
            }
        } catch(error) { }
        window.cb_enable_mathjax = false;
        window.mathEngine = 0;
        window.codeHighlightEngine = 1;
        window.enableCodeLineNumber = false;
        window.codeHighlightTheme = 'cnblogs';
        window.darkModeCodeHighlightTheme = 'vs2015';
        window.isDarkCodeHighlightTheme = false;
        window.isDarkModeCodeHighlightThemeDark = true;
        window.isDisableCodeHighlighter = false;
        window.enableCodeThemeTypeFollowSystem = false;
    </script>
        <script>
            var currentPostDateAdded = '2016-03-09 16:32';
        </script>
    <script src="https://common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script src="/js/blog-common.min.js?v=Rh3UJP47FkvYG-SDmOghfWVw_u2ohaSXm-cYNf96iu4"></script>
    

    
</head>
<body class="skin-codinglife no-navbar">
<a name="top"></a>
<div id="top_nav" class="navbar forpc navbar-custom">
    <nav id="nav_main" class="navbar-main">
        <ul id="nav_left" class="navbar-list navbar-left">
            <li class="navbar-branding">
                <a target="_blank" rel="noopener" href="https://www.cnblogs.com/" title="开发者的网上家园" role="banner">
                    <img src="//common.cnblogs.com/logo.svg" alt="博客园Logo" />
                </a>
            </li>
            <li>
                <a href="/" onclick="countClicks('skin-navbar-sitehome')">首页</a>
            </li>
            <li>
                <a target="_blank" rel="noopener" href="https://news.cnblogs.com/" onclick="countClicks('nav', 'skin-navbar-news')">新闻</a>
            </li>
            <li>
                <a target="_blank" rel="noopener" href="https://q.cnblogs.com/" onclick="countClicks('nav', 'skin-navbar-q')">博问</a>
            </li>
            <li>
                <a id="nav_brandzone" target="_blank" rel="noopener" href="https://brands.cnblogs.com/" onclick="countClicks('nav', 'skin-navbar-brands')">专区</a>
            </li>
            <li>
                <a target="_blank" rel="noopener" href="https://ing.cnblogs.com/" onclick="countClicks('nav', 'skin-navbar-ing')">闪存</a>
            </li>
            <li>
                <a target="_blank" rel="noopener" href="https://edu.cnblogs.com/" onclick="countClicks('nav', 'skin-navbar-edu')">班级</a>
            </li>
        </ul>
        <ul id="nav_right" class="navbar-list navbar-right">
            <li>
                <form id="zzk_search" class="navbar-search" action="https://zzk.cnblogs.com/s" method="get" role="search">
                    <input name="w" id="zzk_search_input" placeholder="代码改变世界" type="search" tabindex="3"/>
                    <button type="submit" id="zzk_search_button">
                        <img src="//common.cnblogs.com/images/blog/search.svg" alt="搜索" />
                    </button>
                </form>
            </li>
            <li id="navbar_login_status" class="navbar-list">
                <a class="navbar-user-info navbar-blog" target="_blank" rel="noopener" href="https://i.cnblogs.com/EditPosts.aspx?opt=1" alt="写随笔" title="写随笔">
                    <img id="new_post_icon" class="navbar-icon" src="//common.cnblogs.com/images/blog/newpost.svg" alt="写随笔" />
                </a>
                <a id="navblog-myblog-icon" class="navbar-user-info navbar-blog" target="_blank" rel="noopener" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx" alt="我的博客" title="我的博客">
                    <img id="myblog_icon" class="navbar-icon" src="//common.cnblogs.com/images/blog/myblog.svg" alt="我的博客" />
                </a>
                <a class="navbar-user-info navbar-message navbar-icon-wrapper" target="_blank" rel="noopener" href="https://msg.cnblogs.com/" alt="短消息" title="短消息">
                    <img id="msg_icon" class="navbar-icon" src="//common.cnblogs.com/images/blog/message.svg" alt="短消息" />
                    <span id="msg_count" style="display: none"></span>
                </a>
                <a id="navbar_lite_mode_indicator" data-current-page="blog" style="display: none" href="javascript:void(0)" alt="简洁模式" title="简洁模式启用，您在访问他人博客时会使用简洁款皮肤展示">
                    <img class="navbar-icon" src="//common.cnblogs.com/images/blog/lite-mode-on.svg" alt="简洁模式" />
                </a>
                <div id="user_info" class="navbar-user-info dropdown">
                    <a class="dropdown-button" target="_blank" rel="noopener" href="https://home.cnblogs.com/">
                        <img id="user_icon" class="navbar-avatar" src="//common.cnblogs.com/images/blog/avatar-default.svg" alt="用户头像" />
                    </a>
                    <div class="dropdown-menu">
                        <a id="navblog-myblog-text" target="_blank" rel="noopener" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx">我的博客</a>
                        <a target="_blank" rel="noopener" href="https://home.cnblogs.com/">我的园子</a>
                        <a target="_blank" rel="noopener" href="https://account.cnblogs.com/settings/account">账号设置</a>
                        <a href="javascript:void(0)" id="navbar_lite_mode_toggle" title="简洁模式会使用简洁款皮肤显示所有博客">
    简洁模式 <img id="navbar_lite_mode_on" src="/images/lite-mode-check.svg" class="hide" /><span id="navbar_lite_mode_spinner" class="hide">...</span>
</a>
                        <a href="javascript:void(0)" onclick="account.logout();">退出登录</a>
                    </div>
                </div>
                <a class="navbar-anonymous" target="_blank" rel="noopener" href="https://account.cnblogs.com/signup">注册</a>
                <a class="navbar-anonymous" href="javascript:void(0);" onclick="account.login()">登录</a>
            </li>
        </ul>
    </nav>
</div>



<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
        <a id="lnkBlogLogo" target="_blank" rel="noopener" href="https://www.cnblogs.com/kylinlin/"><img id="blogLogo" src="/skins/custom/images/logo.gif" alt="返回主页" /></a>		
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle" target="_blank" rel="noopener" href="https://www.cnblogs.com/kylinlin/">杂牌军里的臭皮匠</a>
</h1>
<h2></h2>




		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" target="_blank" rel="noopener" href="https://www.cnblogs.com/">
博客园</a>
</li>
<li>
<a id="blog_nav_myhome" class="menu" target="_blank" rel="noopener" href="https://www.cnblogs.com/kylinlin/">
首页</a>
</li>
<li>

<a id="blog_nav_newpost" class="menu" target="_blank" rel="noopener" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">
新随笔</a>
</li>
<li>
<a id="blog_nav_contact" class="menu" target="_blank" rel="noopener" href="https://msg.cnblogs.com/send/kylinlin">
联系</a></li>
<li>
<a id="blog_nav_rss" class="menu" href="javascript:void(0)" data-rss="https://www.cnblogs.com/kylinlin/rss/">
订阅</a>
<!--<partial name="./Shared/_XmlLink.cshtml" model="Model" /></li>--></li>
<li>
<a id="blog_nav_admin" class="menu" target="_blank" rel="noopener" href="https://i.cnblogs.com/">
管理</a>
</li>
</ul>


		<div class="blogStats">
			<div id="blog_stats_place_holder"><script>loadBlogStats();</script></div>
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->
<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		<div id="post_detail">
    <!--done-->
    <div id="topics">
        <div class="post">
            <h1 class = "postTitle">
                
<a id="cb_post_title_url" class="postTitle2 vertical-middle" target="_blank" rel="noopener" href="https://www.cnblogs.com/kylinlin/p/5258719.html">
    <span role="heading" aria-level="2">Mysql主从同步（复制）</span>
    
</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>目录：</p>  <p>mysql主从同步定义 </p>  <p>&nbsp;&nbsp;&nbsp;&nbsp; 主从同步机制 </p>  <p>配置主从同步 </p>  <p>&nbsp;&nbsp;&nbsp;&nbsp; 配置主服务器 </p>  <p>&nbsp;&nbsp;&nbsp;&nbsp; 配置从服务器 </p>  <p>使用主从同步来备份 </p>  <p>&nbsp;&nbsp;&nbsp;&nbsp; 使用mysqldump来备份</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp; 备份原始文件 </p>  <p>主从同步的小技巧 </p>  <p>排错 </p>  <p>&nbsp;&nbsp;&nbsp;&nbsp; Slave_IO_Running: NO </p>  <p>&nbsp;&nbsp;&nbsp;&nbsp; Slave_SQL_Running: No </p>  <h4></h4>  <h3><a name="_Toc29875" rel="noopener"></a></h3>  <h3>&nbsp;</h3>  <h3>mysql主从同步定义</h3>  <p>主从同步使得数据可以从一个数据库服务器复制到其他服务器上，在复制数据时，一个服务器充当主服务器（master），其余的服务器充当从服务器（slave）。因为复制是异步进行的，所以从服务器不需要一直连接着主服务器，从服务器甚至可以通过拨号断断续续地连接主服务器。通过配置文件，可以指定复制所有的数据库，某个数据库，甚至是某个数据库上的某个表。</p>  <p>使用主从同步的好处：</p>  <ol>   <li>通过增加从服务器来提高数据库的性能，在主服务器上执行写入和更新，在从服务器上向外提供读功能，可以动态地调整从服务器的数量，从而调整整个数据库的性能。 </li>    <li>提高数据安全-因为数据已复制到从服务器，从服务器可以终止复制进程，所以，可以在从服务器上备份而不破坏主服务器相应数据 </li>    <li>在主服务器上生成实时数据，而在从服务器上分析这些数据，从而提高主服务器的性能 </li> </ol>  <p>注意，mysql是异步复制的，而MySQL Cluster是同步复制的。有很多种主从同步的方法，但核心的方法有两种，Statement Based Replication（SBR）基于SQL语句的复制，另一种是Row Based Replication（RBR）基于行的复制，也可以使用Mixed Based Replication（MBR）。在mysql5.6中，默认使用的是SBR。而mysql 5.6.5和往后的版本是基于global transaction identifiers(GTIDs)来进行事务复制。当使用GTIDs时可以大大简化复制过程，因为GTIDs完全基于事务，只要在主服务器上提交了事务，那么从服务器就一定会执行该事务。</p>  <p>通过设置服务器的系统变量binlog_format来指定要使用的格式：</p>  <p>1.SBR：当使用二进制日志时，主服务器会把SQL语句写入到日志中，然后从服务器会执行该日志，这就是SBR，在mysql5.1.4之前的版本都只能使用这种格式。使用SBR会有如下</p>  <p>长处：</p>  <ol>   <li>日志文件更小 </li>    <li>记录了所有的语句，可以用来日后审计 </li> </ol>  <p>弊端：</p>  <ol>   <li>使用如下函数的语句不能被正确地复制：load_file(); uuid(), uuid_short(); user(); found_rows(); sysdate(); get_lock(); is_free_lock(); is_used_lock(); master_pos_wait(); rand(); release_lock(); sleep(); version(); </li>    <li>在日志中出现如下警告信息的不能正确地复制：[Warning] Statement is not safe to log in statement format. </li>    <li>或者在客户端中出现show warnings </li>    <li>Insert … select语句会执行大量的行级锁表 </li>    <li>Update语句会执行大量的行级锁表来扫描整个表 </li> </ol>  <p>2.RBR：主服务器把表的行变化作为事件写入到二进制日志中，主服务器把代表了行变化的事件复制到从服务中，使用RBR的</p>  <p>长处：</p>  <ol>   <li>所有的数据变化都是被复制，这是最安全的复制方式 </li>    <li>更少的行级锁表 </li> </ol>  <p>弊端：</p>  <ol>   <li>日志会很大 </li>    <li>不能通过查看日志来审计执行过的sql语句，不过可以通过使用mysqlbinlog&nbsp;&nbsp; </li>    <li>--base64-output=decode-rows --verbose来查看数据的 变动 </li> </ol>  <p>3.MBR：既使用SBR也使用RBR，默认使用SBR</p>  <h4><a name="_Toc19706" rel="noopener"></a></h4>  <h4>&nbsp;</h4>  <h4>主从同步机制</h4>  <p>Mysql服务器之间的主从同步是基于二进制日志机制，主服务器使用二进制日志来记录数据库的变动情况，从服务器通过读取和执行该日志文件来保持和主服务器的数据一致。</p>  <p>在使用二进制日志时，主服务器的所有操作都会被记录下来，然后从服务器会接收到该日志的一个副本。从服务器可以指定执行该日志中的哪一类事件（譬如只插入数据或者只更新数据），默认会执行日志中的所有语句。</p>  <p>每一个从服务器会记录关于二进制日志的信息：文件名和已经处理过的语句，这样意味着不同的从服务器可以分别执行同一个二进制日志的不同部分，并且从服务器可以随时连接或者中断和服务器的连接。</p>  <p>主服务器和每一个从服务器都必须配置一个唯一的ID号（在my.cnf文件的[mysqld]模块下有一个server-id配置项），另外，每一个从服务器还需要通过CHANGE MASTER TO语句来配置它要连接的主服务器的ip地址，日志文件名称和该日志里面的位置（这些信息存储在主服务器的数据库里）</p>  <h3><a name="_Toc5664" rel="noopener"></a></h3>  <h3>&nbsp;</h3>  <h3>配置主从同步</h3>  <p>有很多种配置主从同步的方法，可以总结为如下的步骤：</p>  <p>1．在主服务器上，必须开启二进制日志机制和配置一个独立的ID</p>  <p>2．在每一个从服务器上，配置一个唯一的ID，创建一个用来专门复制主服务器数据的账号</p>  <p>3．在开始复制进程前，在主服务器上记录二进制文件的位置信息</p>  <p>4．如果在开始复制之前，数据库中已经有数据，就必须先创建一个数据快照（可以使用mysqldump导出数据库，或者直接复制数据文件）</p>  <p>5．配置从服务器要连接的主服务器的IP地址和登陆授权，二进制日志文件名和位置</p>  <h4></h4>  <h4><a name="_Toc12783" rel="noopener"></a></h4>  <h4>配置主服务器</h4>  <p>1.更改配置文件，首先检查你的主服务器上的my.cnf文件中是否已经在[mysqld]模块下配置了log-bin和server-id</p>  <div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">   <pre><span style="color: rgba(0, 0, 0, 1)">[mysqld]

log</span>-bin=mysql-<span style="color: rgba(0, 0, 0, 1)">bin

server</span>-id=1</pre>
</div>

<p><a name="OLE_LINK2" rel="noopener"></a><a name="OLE_LINK1" rel="noopener">注意</a>上面的log-bin和server-id的值都是可以改为其他值的，如果没有上面的配置，首先关闭mysql服务器，然后添加上去，接着重启服务器</p>

<p>2.创建用户，每一个从服务器都需要用到一个账户名和密码来连接主服务器，可以为每一个从服务器都创建一个账户，也可以让全部服务器使用同一个账户。下面就为同一个ip网段的所有从服务器创建一个只能进行主从同步的账户。</p>

<p>首先登陆mysql，然后创建一个用户名为rep，密码为123456的账户，该账户可以被192.168.253网段下的所有ip地址使用，且该账户只能进行主从同步</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>mysql &gt; grant replication slave on *.* to ‘rep’@‘192.168.253.%’ identified by ‘123456’;</pre>
</div>

<p>3.获取二进制日志的信息并导出数据库，步骤：</p>

<p>首先登陆数据库，然后刷新所有的表，同时给数据库加上一把锁，阻止对数据库进行任何的写操作</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>mysql &gt; flush tables with read lock;</pre>
</div>

<p>然后执行下面的语句获取二进制日志的信息</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>mysql &gt; show master status;</pre>
</div>

<p><a target="_blank" href="http://images2015.cnblogs.com/blog/771870/201603/771870-20160309163144397-1842903495.png" rel="noopener noopener"><img title="图片1" style="border-width: 0; background-image: none; padding-top: 0; padding-left: 0; display: inline; padding-right: 0" border="0" alt="图片1" src="https://images2015.cnblogs.com/blog/771870/201603/771870-20160309163145022-1215021782.png" width="862" height="124"></a></p>

<p>File的值是当前使用的二进制日志的文件名，Position是该日志里面的位置信息（不需要纠结这个究竟代表什么），记住这两个值，会在下面配置从服务器时用到。</p>

<p>注意：如果之前的服务器并没有配置使用二进制日志，那么使用上面的sql语句会显示空，在锁表之后，再导出数据库里的数据（如果数据库里没有数据，可以忽略这一步）</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>[root@localhost backup]<span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> mysqldump -uroot -p'123456' -S /data/3306/data/mysql.sock --all-databases &gt; /server/backup/mysql_bak.$(date +%F).sql</span></pre>
</div>

<p>如果数据量很大，可以在导出时就压缩为原来的大概三分之一</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>[root@localhost backup]<span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> mysqldump -uroot -p'123456' -S /data/3306/data/mysql.sock --all-databases | gzip &gt; /server/backup/mysql_bak.$(date +%F).sql.gz</span></pre>
</div>

<p>这时可以对数据库解锁，恢复对主数据库的操作</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>mysql &gt; unlock tables;</pre>
</div>

<p>&nbsp;</p>

<h4><a name="_Toc28969" rel="noopener"></a>配置从服务器</h4>

<p>首先检查从服务器上的my.cnf文件中是否已经在[mysqld]模块下配置leserver-id</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre><span style="color: rgba(0, 0, 0, 1)">[mysqld]

server</span>-id=2</pre>
</div>

<p>注意上面的server-id的值都是可以改为其他值的（建议更改为ip地址的最后一个字段），如果没有上面的配置，首先关闭mysql服务器，然后添加上去，接着重启服务器</p>

<p>如果有多个从服务器上，那么每个服务器上配置的server-id都必须不一致。从服务器上没必要配置log-bin，当然也可以配置log-bin选项，因为可以在从服务器上进行数据备份和灾难恢复，或者某一天让这个从服务器变成一个主服务器</p>

<p>如果主服务器导出了数据，下面就导入该文件，如果主服务器没有数据，就忽略这一步</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>[root@localhost ~]<span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> mysql -uroot -p'123456' -S /data/3306/data/mysql.sock &lt; /server/backup/mysql_bak.2015-07-01.sql</span></pre>
</div>

<p>如果从主服务器上拿过来的是压缩文件，就先解压再导入</p>

<p>配置同步参数，登陆mysql，输入如下信息：</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>mysql&gt;<span style="color: rgba(0, 0, 0, 1)"> CHANGE MASTER TO

</span>-&gt; MASTER_HOST=<span style="color: rgba(0, 0, 0, 1)">'master_host_name',

</span>-&gt; MASTER_USER=<span style="color: rgba(0, 0, 0, 1)">'replication_user_name',

</span>-&gt; MASTER_PASSWORD=<span style="color: rgba(0, 0, 0, 1)">'replication_password',

</span>-&gt; MASTER_LOG_FILE='recorded_log_file_name',</pre>
</div>

<p>如图所示：</p>

<p><a target="_blank" href="http://images2015.cnblogs.com/blog/771870/201603/771870-20160309163145585-632994485.png" rel="noopener noopener"><img title="图片2" style="border-width: 0; background-image: none; padding-top: 0; padding-left: 0; display: inline; padding-right: 0" border="0" alt="图片2" src="https://images2015.cnblogs.com/blog/771870/201603/771870-20160309163146257-1219019147.png" width="851" height="139"></a></p>

<p>&nbsp;</p>

<p>启动主从同步进程</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>mysql &gt; start slave;</pre>
</div>

<p>检查状态</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>mysql &gt; show slave status \G</pre>
</div>

<p><a target="_blank" href="http://images2015.cnblogs.com/blog/771870/201603/771870-20160309163147475-1211207007.png" rel="noopener noopener"><img title="图片3" style="border-width: 0; background-image: none; padding-top: 0; padding-left: 0; display: inline; padding-right: 0" border="0" alt="图片3" src="https://images2015.cnblogs.com/blog/771870/201603/771870-20160309163148225-1200721404.png" width="852" height="487"></a></p>

<p>上面的两个进程都显示YES则表示配置成功</p>

<h3><a name="_Toc21050" rel="noopener"></a></h3>

<h3>&nbsp;</h3>

<h3>使用主从同步来备份</h3>

<p>把主服务器的数据复制到从服务器上，然后备份从服务器的数据，在数据量不是很大的时候使用mysqldump命令，对于很大的数据库，就直接备份数据文件。</p>

<h4><a name="_Toc3772" rel="noopener"></a></h4>

<h4>使用mysqldump来备份</h4>

<p>步骤：（以下的所有操作都在从服务器上进行）</p>

<p>1.首先暂停从服务器的复制进程</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>shell &gt; mysqladmin stop-slave</pre>
</div>

<p>或者只是暂停SQL进程（从服务器仍然能接收二进制日志的事件，但不会执行这些事件，这样能在重启SQL进程时加快复制进度）</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>shell &gt; mysql -e ‘stop slave sql_thread;’</pre>
</div>

<p>2.使用mysqldump导出全部或部分的数据库</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>shell &gt; mysqldump --all-databases &gt; fulldb.dump</pre>
</div>

<p>3.在导出数据库后，重启复制进程</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>shell &gt; mysqladmin start-slave</pre>
</div>

<p>&nbsp;</p>

<h4><a name="_Toc17989" rel="noopener"></a>备份原始文件</h4>

<p>为了保证数据文件的完整性，在备份之前首先关闭从服务器，步骤：</p>

<p>1.关闭从服务器：</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>shell &gt; mysqladmin shutdown</pre>
</div>

<p>2.复制数据文件，可以使用压缩命令，假如当前目录就是数据库的数据目录（在my.cnf文件中的配置项datadir的值就是该目录的位置）</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>shell &gt; tar cf /tmp/dbbackup.tar ./data</pre>
</div>

<p>3.然后再启动mysql服务器</p>

<h3><a name="_Toc29674" rel="noopener"></a></h3>

<h3>&nbsp;</h3>

<h3>主从同步的小技巧</h3>

<p>主服务器第一次导入数据，如果你从其他地方拿来了要导入到主服务器中的数据，此时只要在主服务器中导入一次即可，因为这些数据会自动发送到从服务器中，在主服务器上使用命令</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>shell &gt; mysql -h master &lt; other_data.sql</pre>
</div>

<p>增加从服务器，本来已经至少有一个从服务器时（暂时命名为slave1），决定再添加其余的从服务器（slave2），此时就不需要像上面那样去操作主服务器，只要复制一个已经存在的从服务器就可以了</p>

<h3><a name="_Toc23532" rel="noopener"></a></h3>

<h3>&nbsp;</h3>

<h3>排错</h3>

<h4><a name="_Toc18436" rel="noopener"></a></h4>

<h4>Slave_IO_Running: NO</h4>

<p>这是一个很常见的错误（我也曾对这个错误咬牙切齿），总结起来就三个原因：</p>

<ol>
  <li>主服务器的网络不通，或者主服务器的防火墙拒绝了外部连接3306端口 </li>

  <li>在配置从服务器时，输错了ip地址和密码，或者主服务器在创建用户时写错了用户名和密码 </li>

  <li>在配置从服务器时，输错了主服务器的二进制日志信息 </li>
</ol>

<p>排错过程：（主服务器ip：192.168.1.139，从服务器ip：192.168.1.204）</p>

<p>第0步就是检查错误日志，如果不能快速排错，可以按我的步骤试试：</p>

<p>1．首先在从服务器上执行ping程序，确定能ping通主服务器</p>

<p>在从服务器上执行mysq的远程连接</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>[root@slave204 log]<span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> mysql -urep -p -h 192.168.1.139 -P3306</span></pre>
</div>

<p>如果显示ERROR 1045 (28000): Access denied for user 'test'@'192.168.1.204' (using password: YES)则跳转到第3</p>

<p>2．登陆主服务器的mysql，查看所有的用户</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>mysql &gt; select user,host from mysql.user;</pre>
</div>

<p><a target="_blank" href="http://images2015.cnblogs.com/blog/771870/201603/771870-20160309163148788-967670710.png" rel="noopener noopener"><img title="图片4" style="border-width: 0; background-image: none; padding-top: 0; padding-left: 0; display: inline; padding-right: 0" border="0" alt="图片4" src="https://images2015.cnblogs.com/blog/771870/201603/771870-20160309163149272-1048386936.png" width="862" height="213"></a></p>

<p>上图就是我的错误根源，可以看到用户名完全写错了，先删除错误的用户：</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>mysql &gt; drop user “rep@192.168.1.%”@”%”;</pre>
</div>

<p>再重新创建用户：</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>mysql &gt; grant replication slave on *.* to ‘rep’@‘192.168.1.%’ identified by ‘123456<span style="color: rgba(0, 0, 0, 1)">’;

mysql </span>&gt; flush privileges;</pre>
</div>

<p>3．假如用户名没有错，那么如何排除是否是输入的密码错误呢？</p>

<p>额，我也想知道方法。最好就是多输入几遍，或者重新创建用户名和密码来测试。问题还没有解决，转到4</p>

<p>4．在你的防火墙中添加3306端口</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>[root@localhost mysql]<span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> firewall-cmd --zone=public --add-port=3306/tcp --permanent</span>
<span style="color: rgba(0, 0, 0, 1)">
[root</span>@localhost mysql]<span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> firewall-cmd --reload</span></pre>
</div>

<p>再关闭selinux</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>[root@slave204 log]<span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> vi /etc/sysconfig/selinux</span></pre>
</div>

<p>把SELINUX=enforcing改为SELINUX=disabled</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>[root@slave204 log]<span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> source /etc/sysconfig/selinux</span></pre>
</div>

<p>登录主服务器，查看服务器状态</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>mysql &gt; show master status \G</pre>
</div>

<p>然后重新配置一次从服务器，在配置之前首先关闭主从同步进程</p>

<div class="cnblogs_code" style="border: 1px solid rgba(204, 204, 204, 1); padding: 5px; background-color: rgba(245, 245, 245, 1)">
  <pre>mysql &gt; stop slave;</pre>
</div>

<p>之外的方法，我也没试过</p>

<h4><a name="_Toc29331" rel="noopener"></a></h4>

<h4>&nbsp;</h4>

<h4>Slave_SQL_Running: No</h4>

<p>把上面的Slave_IO_Running调试成YES后，就轮到这个小样了。我根据这个博客的内容来解决的：<a target="_blank" href="http://kerry.blog.51cto.com/172631/277414" rel="noopener noopener">http://kerry.blog.51cto.com/172631/277414</a></p>
</div>
<div class="clear"></div>
<div id="blog_post_info_block" role="contentinfo">
    <div id="blog_post_info"></div>
    <div class="clear"></div>
    <div id="post_next_prev"></div>
</div>
            </div>
            <div class="postDesc">posted @ 
<span id="post-date">2016-03-09 16:32</span>&nbsp;
<a target="_blank" rel="noopener" href="https://www.cnblogs.com/kylinlin/">kylinlin</a>&nbsp;
阅读(<span id="post_view_count">125687</span>)&nbsp;
评论(<span id="post_comment_count">2</span>)&nbsp;
<a target="_blank" href="https://i.cnblogs.com/EditPosts.aspx?postid=5258719" rel="nofollow noopener">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(5258719);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '5258719', targetLink: 'https://www.cnblogs.com/kylinlin/p/5258719.html', title: 'Mysql主从同步（复制）' })">举报</a></div>
        </div>
	    
	    
    </div><!--end: topics 文章、评论容器-->
</div>

<script>
    var cb_entryId = 5258719, cb_entryCreatedDate = '2016-03-09 16:32', cb_postType = 1, cb_postTitle = 'Mysql主从同步（复制）';
    var allowComments = true, cb_blogId = 230856, cb_blogApp = 'kylinlin', cb_blogUserGuid = '2b42a58f-860d-e511-b908-9dcfd8948a71';
    mermaidRender.render()
    markdown_highlight()
    zoomManager.apply("#cnblogs_post_body img:not(.code_img_closed):not(.code_img_opened)");
    updatePostStats(
            [cb_entryId],
            function(id, count) { $("#post_view_count").text(count) },
            function(id, count) { $("#post_comment_count").text(count) })
</script>
<a id="!comments"></a>
<div id="blog-comments-placeholder"></div>
<div id="comment_form" class="commentform">
    <a name="commentform"></a>
    <div id="divCommentShow"></div>
    <div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
    <div id="comment_form_container"></div>
    <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
        <div id="cnblogs_ch"></div>
    <div id="opt_under_post"></div>
    <div id="cnblogs_c1" class="under-post-card">
            <div id='div-gpt-ad-1592365906576-0' style='width: 300px; height: 250px;'></div>
    </div>
    <div id="under_post_card1"></div>
    <div id="under_post_card2"></div>
    <div id="HistoryToday" class="under-post-card"></div>
    <script type="text/javascript">
        var commentManager = new blogCommentManager();
        commentManager.renderComments(0);
        fixPostBody();
        window.footnoteTipManager.generateFootnoteTips();

            window.tocManager.displayDisableTocTips = false;
            window.tocManager.generateToc();
            
                setTimeout(function() { countViews(cb_blogId, cb_entryId); }, 50);
            
            deliverT2();
            deliverC1C2();
            loadNewsAndKb();
            
                LoadPostCategoriesTags(cb_blogId, cb_entryId);
            
            LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
            GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
            loadOptUnderPost();
            GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
                </script>
</div>

	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->
	<div id="sideBar">
		<div id="sideBarMain">
			<div id="sidebar_news" class="newsItem">
            <script>loadBlogNews();</script>
</div>
<div id="sidebar_c3"></div>
			<div id="blog-calendar" style="display:none"></div><script>loadBlogDefaultCalendar();</script>			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div>
                    <script>loadBlogSideColumn();</script>
			</div>			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		<!--done-->
Copyright &copy; 2023 kylinlin
<br /><span id="poweredby">Powered by .NET 7.0 on Kubernetes</span>



	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->





<input type="hidden" id="antiforgery_token" value="CfDJ8GXQNXLgcs5PrnWvMs4xAGMOoUibfmGTujcWrZVXme2wAb6F_hUFhN2pfhIhqMxbY5lE7mPzTfsy9tvvhqvPMp7zr1q8myNPY2_feZnMjaQH4SxdpaTHhK22w88KXnaOtxzEi0ojAJCnd2lG6MyHL0U"/>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-476124-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    var kv = getGACustom();
    if (kv) {
        gtag('set', kv);
    }
    gtag('config', 'UA-476124-1');
</script>
<script defer src="https://hm.baidu.com/hm.js?866c9be12d4a814454792b1fd0fed295"></script>
</body>
</html>
      </div>
      
      
      
    </div>
  <ul class="breadcrumb">
            <li><a href="/images/">IMAGES</a></li>
            <li><a href="/images/mysql-8-0-15-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E9%85%8D%E7%BD%AE.md/">MYSQL-8-0-15-主从复制配置.MD</a></li>
            <li>2</li>
          
  </ul>

    
    


    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Weidan</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">218k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">13:12</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  




<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"liweidan-cn","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
